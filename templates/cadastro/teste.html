{% extends 'base.html' %}

{% block title %}Cadastro{% endblock %}

{% block links %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/create_feral.css') }}">
{% endblock %}

{% block content %}
<main>
    <h1>Cadastro de Personagem</h1>

    <nav class="form-nav">
        <a data-target="0">Estilo</a>
        <a data-target="1">Habilidades</a>
        <a data-target="2">Traços</a>
        <a data-target="3">Utensílios</a>
        <a data-target="4" class="active">Informações</a>
    </nav>

    <div class="form-viewport">
        <form action="" method="post" class="form-container" id="formContainer">
            <!-- Sessão 0: Estilo -->
            <section>
                <div class="stats">
                    <h3>1. Escolha o seu Estilo</h3>
                    <div>
                        <p>LIGEIRO</p>
                        <input type="number" min="1" required>
                    </div>
    
                    <div>
                        <p>PODEROSO</p>
                        <input type="number" min="1" required>
                    </div>
    
                    <div>
                        <p>PRECISO</p> 
                        <input type="number" min="1" required>
                    </div>
    
                    <div>
                        <p>SAGAZ </p>
                        <input type="number" min="1" required>
                    </div>
                </div>
            </section>

            <!-- Sessão 1: Habilidades -->
            <section>
                <h3>2. Escolha sua Habilidade</h3>
                <div class="habilidades">
                    {% for hab in ['AGARRAR','ATIRAR','CURAR','GOLPEAR','ARMAZENAR','ATRAVESSAR','ESTUDAR','MANUFATURAR','ASSEGURAR','CHAMAR','EXIBIR','PROCURAR'] %}
                        <div>
                            <p>{{ hab }}</p>
                            <input type="number" name="{{ hab }}" min="1" required>
                        </div>
                    {% endfor %}
                </div>
            </section>

            <!-- Sessão 2: Traços -->
            <section>
                {% for t in range(1,4) %}
                    <div class="traco">
                        <h2>Traço {{ t }}:</h2>
                        <label>Nome:</label><br>
                        <input type="text" name="nome_traco{{ t }}" required><br>
                        <label>Custo:</label><br>
                        <input type="text" name="custo_traco{{ t }}" required><br>
                        <p>Descrição</p>
                        <textarea name="descricao_traco{{ t }}" required></textarea><br>

                        <p>Habilidade do traço</p>
                        {% for hab in ['agarrar','atirar','curar','golpear','armazenar','atravessar','estudar','manufaturar','assegurar','chamar','exibir','procurar'] %}
                            <input type="radio" id="{{ hab }}{{ t }}" name="habilidade_traco{{ t }}" value="{{ hab }}" required>
                            <label for="{{ hab }}{{ t }}">{{ hab.capitalize() }}</label><br>
                        {% endfor %}

                        <p>Estilo</p>
                        {% for est in ['ligeiro','poderoso','preciso','sagaz'] %}
                            <input type="radio" id="{{ est }}{{ t }}" name="estilo_traco{{ t }}" value="{{ est }}" required>
                            <label for="{{ est }}{{ t }}">{{ est.capitalize() }}</label><br>
                        {% endfor %}
                    </div>
                {% endfor %}
            </section>

            <!-- Sessão 3: Utensílios -->
            <section>
                <h3>Utensílios</h3>
                <input type="text" name="utensilio_nome" placeholder="Nome" required><br>
                <input type="text" name="utensilio_alcance" placeholder="alcance" required><br>
                <input type="text" name="utensilio_quebrado" placeholder="quebrado" required><br>
                <input type="number" name="utensilio_dur_max" placeholder="durabilidade" required><br>
                <input type="text" name="utensilio_ataques" placeholder="ataques" required><br>
            </section>

            <!-- Sessão 4: Informações -->
            <section class="active">
                <label>Nome:</label><br>
                <input type="text" name="nome" required><br>
                <label>Titulo do feral:</label><br>
                <input type="text" name="titulo" required><br>
                <label>Especialidade:</label><br>
                <input type="text" name="especialidade" required><br>
                <label>Criação:</label><br>
                <textarea name="criacao" required></textarea><br>
                <label>Iniciação:</label><br>
                <textarea name="iniciacao" required></textarea><br>
                <label>Ambição:</label><br>
                <textarea name="ambicao" required></textarea><br>
                <label>Conexão:</label><br>
                <textarea name="conexao" required></textarea><br>
                <label>Imagem:</label><br>
                <input type="file" name="imagem" accept="image/*" required><br>
                <label>Vigor:</label><br>
                <input type="number" name="vigor_max" placeholder="vigor_max" min="1" max='100' required><br>
            </section>
        </form>
    </div>

    <button type="submit">Criar Feral</button>

</main>

<script>
const viewport  = document.querySelector('.form-viewport');
const container = document.getElementById('formContainer');
const links     = document.querySelectorAll('.form-nav a');
const sections  = container.querySelectorAll('section');

function goTo(index) {
    const w = viewport.clientWidth;
    container.style.transform = `translateX(-${index * w}px)`;

    links.forEach(l => l.classList.remove('active'));
    links[index].classList.add('active');

    sections.forEach(s => s.classList.remove('active'));
    sections[index].classList.add('active');
}

links.forEach((link, i) => link.addEventListener('click', () => goTo(i)));
window.addEventListener('resize', () => {
    const activeIndex = [...links].findIndex(l => l.classList.contains('active'));
    if (activeIndex >= 0) goTo(activeIndex);
});
</script>
{% endblock %}